<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Fridge Turntable</title>
    <style>
      body {
        margin: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }
      #viewer {
        width: 600px;
        height: 600px;
        background-size: contain;
        background-position: center;
        cursor: grab;
        user-select: none;
      }
      #viewer:active {
        cursor: grabbing;
      }
    </style>
  </head>
  <body>
    <div id="viewer"></div>

    <script>
      const viewer = document.getElementById("viewer");
      const frameCount = 20;
      const images = [];

      // Preload images
      for (let i = 1; i <= frameCount; i++) {
        const num = i.toString().padStart(4, "0");
        const img = new Image();
        img.src = `img/${num}.jpg`;
        images.push(img);
      }

      let currentFrame = 0;
      let dragging = false;
      let startX = 0;

      function showFrame(index) {
        const num = ((index % frameCount) + frameCount) % frameCount; // wrap around
        viewer.style.backgroundImage = `url('img/${(num + 1)
          .toString()
          .padStart(4, "0")}.jpg')`;
      }

      viewer.addEventListener("mousedown", (e) => {
        dragging = true;
        startX = e.clientX;
      });

      viewer.addEventListener("mouseup", () => {
        dragging = false;
      });

      viewer.addEventListener("mouseleave", () => {
        dragging = false;
      });

      viewer.addEventListener("mousemove", (e) => {
        if (!dragging) return;
        const dx = e.clientX - startX;
        const sensitivity = 5;
        if (Math.abs(dx) > sensitivity) {
          currentFrame += dx > 0 ? -1 : 1;
          showFrame(currentFrame);
          startX = e.clientX;
        }
      });

      // Show initial frame
      showFrame(currentFrame);
    </script>
  </body>
</html>
